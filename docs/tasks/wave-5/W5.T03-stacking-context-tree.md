---
task_id: "W5.T03"
title: "Implement Stacking Context Tree"
wave: 5
estimated_hours: 8-10
depends_on:
  - "W1.R05"
  - "W2.T03"
inputs:
  - "docs/tasks/notes/W1.R05-notes.md"
  - "docs/tasks/notes/W2.T03-notes.md"
outputs:
  - "src/paint/stacking.rs"
  - "tests/paint/test_stacking.rs"
  - "docs/tasks/notes/W5.T03-notes.md"
skills_required:
  - "Rust"
  - "CSS stacking contexts"
context_files:
  - "docs/paint/display-list.md"
verification:
  - "cargo test paint::stacking"
---

# Implement Stacking Context Tree

## Context

Stacking contexts determine paint order (z-index, opacity, transforms). Build tree from fragment tree.

CSS 2.1 Appendix E.

## Implementation

```rust
pub struct StackingContext {
    pub z_index: i32,
    pub children: Vec<StackingContext>,
    pub fragments: Vec<FragmentNode>,
}

pub fn build_stacking_tree(root: &FragmentNode) -> StackingContext;
```

Time: 8-10 hours
