---
task_id: "W3.T15"
title: "Implement Font Loading & Caching"
wave: 3
estimated_hours: 6-8
depends_on:
  - "W3.T14"
inputs:
  - "docs/tasks/notes/W3.T14-notes.md"
outputs:
  - "src/text/font/loader.rs"
  - "src/text/font/cache.rs"
  - "tests/text/test_font_loading.rs"
  - "docs/tasks/notes/W3.T15-notes.md"
skills_required:
  - "Rust"
  - "Font file formats (TTF/OTF)"
  - "Caching strategies"
context_files:
  - "docs/text/font-system.md"
verification:
  - "cargo test text::font_loading"
---

# Implement Font Loading & Caching

## Context

Font loading reads font files from disk/memory and caches them for reuse. Uses fontdb crate for system font discovery and ttf-parser for parsing.

## Implementation

```rust
use fontdb::Database;
use ttf_parser::Face;

pub struct FontLoader {
    db: Database,
    cache: LruCache<FontId, Arc<FontFace>>,
}

impl FontLoader {
    pub fn load_font(&mut self, query: &FontQuery) -> Result<Arc<FontFace>>;
    pub fn load_from_path(&mut self, path: &Path) -> Result<Arc<FontFace>>;
}
```

## Testing

Tests (15+):
- Load system fonts
- Load from file
- Cache hits/misses
- Font matching
- Error handling

Time: 6-8 hours
