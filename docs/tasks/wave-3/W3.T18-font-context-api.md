---
task_id: "W3.T18"
title: "Implement FontContext API"
wave: 3
estimated_hours: 4-6
depends_on:
  - "W3.T15"
  - "W3.T16"
inputs:
  - "docs/tasks/notes/W3.T15-notes.md"
  - "docs/tasks/notes/W3.T16-notes.md"
outputs:
  - "src/text/font_context.rs"
  - "tests/text/test_font_context.rs"
  - "docs/tasks/notes/W3.T18-notes.md"
skills_required:
  - "Rust"
  - "API design"
context_files:
  - "docs/text/font-system.md"
verification:
  - "cargo test text::font_context"
---

# Implement FontContext API

## Context

FontContext is the high-level API that brings together font loading, caching, metrics, and fallback into a unified interface used by layout and text shaping.

## Implementation

```rust
pub struct FontContext {
    loader: FontLoader,
    metrics_cache: MetricsCache,
}

impl FontContext {
    pub fn resolve_font(&mut self, family: &str, size: f32) -> Result<ResolvedFont>;
    pub fn get_metrics(&mut self, font: &ResolvedFont) -> &FontMetrics;
    pub fn measure_text(&mut self, text: &str, font: &ResolvedFont) -> f32;
}
```

## Testing

Tests (15+):
- Font resolution
- Metrics access
- Text measurement
- Caching behavior
- Error handling

Time: 4-6 hours
