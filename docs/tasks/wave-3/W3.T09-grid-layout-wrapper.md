---
task_id: "W3.T09"
title: "Implement Grid Layout Wrapper (Taffy Integration)"
wave: 3
estimated_hours: 6-8
depends_on:
  - "W2.T07"
inputs:
  - "docs/tasks/notes/W2.T07-notes.md"
outputs:
  - "src/layout/contexts/grid.rs"
  - "tests/layout/test_grid.rs"
  - "docs/tasks/notes/W3.T09-notes.md"
skills_required:
  - "Rust"
  - "Taffy grid library"
  - "CSS Grid"
context_files:
  - "docs/layout/grid.md"
verification:
  - "cargo test layout::grid"
---

# Implement Grid Layout Wrapper

## Context

CSS Grid is extremely complex - we use Taffy's grid implementation and wrap it in our FormattingContext interface.

### Background

**Taffy Grid:**
- Supports grid-template-rows/columns
- grid-auto-flow
- grid areas
- gap properties

**Integration strategy:**
- Convert BoxNode â†’ Taffy grid tree
- Map CSS Grid properties
- Run Taffy layout
- Convert results

## Implementation

```rust
pub struct GridFormattingContext {
    taffy: TaffyTree<()>,
}

impl FormattingContext for GridFormattingContext {
    fn layout(&self, box_node: &BoxNode, constraints: &LayoutConstraints) 
        -> Result<FragmentNode> {
        // Similar to flex wrapper
        // But with grid-specific properties
    }
}
```

## Testing

Tests (15+):
- Basic grid
- Template tracks
- Auto-flow
- Grid gaps
- Spanning items

Time: 6-8 hours
