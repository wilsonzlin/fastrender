---
task_id: "W3.T16"
title: "Implement Font Metrics Extraction"
wave: 3
estimated_hours: 6-8
depends_on:
  - "W3.T15"
inputs:
  - "docs/tasks/notes/W3.T15-notes.md"
outputs:
  - "src/text/font/metrics.rs"
  - "tests/text/test_font_metrics.rs"
  - "docs/tasks/notes/W3.T16-notes.md"
skills_required:
  - "Rust"
  - "OpenType font tables"
context_files:
  - "docs/text/font-system.md"
verification:
  - "cargo test text::font_metrics"
---

# Implement Font Metrics Extraction

## Context

Font metrics include ascent, descent, line height, x-height, cap-height - critical for text layout. Extract from OpenType font tables using ttf-parser.

## Implementation

```rust
pub struct FontMetrics {
    pub ascent: f32,
    pub descent: f32,
    pub line_gap: f32,
    pub units_per_em: u16,
    pub x_height: f32,
    pub cap_height: f32,
}

pub fn extract_metrics(face: &Face) -> FontMetrics {
    // Read from hhea, OS/2, head tables
}
```

## Testing

Tests (15+):
- Extract metrics from various fonts
- Scale metrics by font size
- Fallback for missing metrics
- Line height calculation

Time: 6-8 hours
