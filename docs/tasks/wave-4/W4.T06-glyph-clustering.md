---
task_id: "W4.T06"
title: "Implement Glyph Clustering"
wave: 4
estimated_hours: 4-6
depends_on:
  - "W4.T05"
inputs:
  - "outputs/notes/W4.T05-notes.md"
outputs:
  - "src/text/clustering.rs"
  - "tests/text/test_clustering.rs"
  - "outputs/notes/W4.T06-notes.md"
skills_required:
  - "Rust"
  - "Glyph cluster semantics"
context_files:
  - "docs/plan/03-text-shaping.md"
verification:
  - "cargo test text::clustering"
---

# Implement Glyph Clustering

## Context

Glyph clusters map characters to glyphs (many-to-many). Essential for cursor positioning and text selection.

## Implementation

```rust
pub struct GlyphCluster {
    pub char_start: usize,
    pub char_end: usize,
    pub glyph_start: usize,
    pub glyph_end: usize,
}

pub fn build_clusters(text: &str, glyphs: &[GlyphPosition]) -> Vec<GlyphCluster>;
```

Time: 4-6 hours
