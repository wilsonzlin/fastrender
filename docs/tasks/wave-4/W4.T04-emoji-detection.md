---
task_id: "W4.T04"
title: "Implement Emoji Detection"
wave: 4
estimated_hours: 4-6
depends_on: []
inputs: []
outputs:
  - "src/text/emoji.rs"
  - "tests/text/test_emoji.rs"
  - "docs/tasks/notes/W4.T04-notes.md"
skills_required:
  - "Rust"
  - "Unicode emoji properties"
context_files:
  - "docs/text/shaping.md"
verification:
  - "cargo test text::emoji"
---

# Implement Emoji Detection

## Context

Emoji require special handling (color fonts, ZWJ sequences). Detect emoji using Unicode properties.

## Implementation

```rust
pub fn is_emoji(c: char) -> bool {
    // Check Unicode Emoji property
}

pub fn is_emoji_presentation(c: char) -> bool {
    // Check if should render as emoji (vs text)
}

pub fn find_emoji_sequences(text: &str) -> Vec<EmojiSequence> {
    // Find emoji with modifiers, ZWJ sequences, etc.
}
```

## Testing

Tests (15+):
- Basic emoji
- Emoji with modifiers (skin tone)
- ZWJ sequences
- Text vs emoji presentation
- Regional indicators (flags)

Time: 4-6 hours
