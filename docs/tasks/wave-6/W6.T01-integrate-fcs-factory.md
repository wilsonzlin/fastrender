---
task_id: "W6.T01"
title: "Integrate All Formatting Contexts into Factory"
wave: 6
estimated_hours: 6-8
depends_on:
  - "W3.T04"
  - "W3.T06"
  - "W3.T08"
  - "W3.T09"
  - "W3.T10"
  - "W3.T12"
  - "W4.T12"
inputs:
  - "outputs/notes/W3.T04-notes.md"
  - "outputs/notes/W3.T06-notes.md"
  - "outputs/notes/W3.T08-notes.md"
  - "outputs/notes/W3.T09-notes.md"
  - "outputs/notes/W3.T10-notes.md"
  - "outputs/notes/W3.T12-notes.md"
  - "outputs/notes/W4.T12-notes.md"
outputs:
  - "src/layout/contexts/factory.rs"
  - "tests/layout/test_factory.rs"
  - "outputs/notes/W6.T01-notes.md"
skills_required:
  - "Rust"
  - "Factory pattern"
context_files:
  - "docs/plan/01-integration.md"
verification:
  - "cargo test layout::factory"
---

# Integrate All Formatting Contexts into Factory

## Context

The FormattingContextFactory dispatches box layout to appropriate FC implementation (Block, Inline, Flex, Grid, Table, etc.).

## Implementation

```rust
pub struct FormattingContextFactory;

impl FormattingContextFactory {
    pub fn create(&self, fc_type: FormattingContextType) -> Box<dyn FormattingContext> {
        match fc_type {
            FormattingContextType::Block => Box::new(BlockFormattingContext::new()),
            FormattingContextType::Inline => Box::new(InlineFormattingContext::new()),
            FormattingContextType::Flex => Box::new(FlexFormattingContext::new()),
            FormattingContextType::Grid => Box::new(GridFormattingContext::new()),
            FormattingContextType::Table => Box::new(TableFormattingContext::new()),
        }
    }
}
```

Time: 6-8 hours
