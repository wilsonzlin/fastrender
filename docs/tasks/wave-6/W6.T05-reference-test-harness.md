---
task_id: "W6.T05"
title: "Implement Reference Test Harness"
wave: 6
estimated_hours: 8-10
depends_on:
  - "W6.T02"
inputs:
  - "outputs/notes/W6.T02-notes.md"
outputs:
  - "tests/ref/harness.rs"
  - "tests/ref/compare.rs"
  - "outputs/notes/W6.T05-notes.md"
skills_required:
  - "Rust"
  - "Image comparison"
  - "Reference testing"
context_files:
  - "docs/plan/01-integration.md"
verification:
  - "cargo test ref"
---

# Implement Reference Test Harness

## Context

Reference tests compare rendered output against reference images. Essential for catching rendering regressions.

## Implementation

```rust
pub struct RefTestHarness {
    renderer: FastRender,
}

impl RefTestHarness {
    pub fn run_ref_test(&mut self, test: &Path, reference: &Path) -> Result<RefTestResult>;
    
    pub fn compare_images(&self, actual: &Pixmap, expected: &Pixmap) -> ImageDiff;
}
```

Time: 8-10 hours
